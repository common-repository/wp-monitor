function kvLookup(t,i,e,n,o,a){var r=n,l=!1;if(null!==t&&void 0!==t&&(null!==e&&void 0!==e&&"object"==typeof e&&t in e?(r=e[t],l=!0):null!==i&&void 0!==i&&"object"==typeof i&&t in i?(r=i[t],l=!0):r=n,!0===l&&null!==o&&void 0!==o))switch(o){case"int":r=parseInt(r,10);break;case"float":r=parseFloat(r)}return r}function getColor(t,i,e,n,o){var a,r,l,s,c,u,m,f,g,d,h,p,v,x;n=n||o.length>0;if(o.ranges.length>0){!0===o.percents&&(t=100*i);for(var b=0;b<o.ranges.length;b++)if(t>=o.ranges[b].lo&&t<=o.ranges[b].hi)return o.ranges[b].color}if(1===(a=e.length))return e[0];for(r=n?1/a:1/(a-1),l=[],b=0;b<e.length;b++)s=n?r*(b+1):r*b,c=parseInt(cutHex(e[b]).substring(0,2),16),u=parseInt(cutHex(e[b]).substring(2,4),16),m=parseInt(cutHex(e[b]).substring(4,6),16),l[b]={pct:s,color:{r:c,g:u,b:m}};if(0===i)return"rgb("+[l[0].color.r,l[0].color.g,l[0].color.b].join(",")+")";for(var k=0;k<l.length;k++)if(i<=l[k].pct)return n?"rgb("+[l[k].color.r,l[k].color.g,l[k].color.b].join(",")+")":(f=l[k-1],g=l[k],d=g.pct-f.pct,h=(i-f.pct)/d,p=1-h,v=h,x={r:Math.floor(f.color.r*p+g.color.r*v),g:Math.floor(f.color.g*p+g.color.g*v),b:Math.floor(f.color.b*p+g.color.b*v)},"rgb("+[x.r,x.g,x.b].join(",")+")")}function setDy(t,i,e){(!ie||ie>9)&&t.node.firstChild.attributes.dy&&(t.node.firstChild.attributes.dy.value=0)}function getRandomInt(t,i){return Math.floor(Math.random()*(i-t+1))+t}function cutHex(t){return"#"==t.charAt(0)?t.substring(1,7):t}function humanFriendlyNumber(t,i){var e,n,o,a;for(n=(e=Math.pow)(10,i),o=7;o;)(a=e(10,3*o--))<=t&&(t=Math.round(t*n/a)/n+"KMGTPE"[o]);return t}function formatNumber(t){var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")}function getStyle(t,i){var e="";return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,"").getPropertyValue(i):t.currentStyle&&(i=i.replace(/\-(\w)/g,function(t,i){return i.toUpperCase()}),e=t.currentStyle[i]),e}function onCreateElementNsReady(t){void 0!==document.createElementNS?t():setTimeout(function(){onCreateElementNsReady(t)},100)}function extend(t){t=t||{};for(var i=1;i<arguments.length;i++)if(arguments[i])for(var e in arguments[i])arguments[i].hasOwnProperty(e)&&(t[e]=arguments[i][e]);return t}JustGage=function(t){var i=this;if(null===t||void 0===t)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;var e;if(null!==t.id&&void 0!==t.id){if(!(e=document.getElementById(t.id)))return console.log("* justgage: No element with id : %s found",t.id),!1}else{if(null===t.parentNode||void 0===t.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;e=t.parentNode}var n=e.dataset?e.dataset:{},o=null!==t.defaults&&void 0!==t.defaults&&t.defaults;!1!==o&&delete(t=extend({},t,o)).defaults,i.config={id:t.id,value:kvLookup("value",t,n,0,"float"),defaults:kvLookup("defaults",t,n,0,!1),parentNode:kvLookup("parentNode",t,n,null),width:kvLookup("width",t,n,null),height:kvLookup("height",t,n,null),valueFontColor:kvLookup("valueFontColor",t,n,"#010101"),valueFontFamily:kvLookup("valueFontFamily",t,n,"Arial"),symbol:kvLookup("symbol",t,n,""),min:kvLookup("min",t,n,0,"float"),minTxt:kvLookup("minTxt",t,n,!1),max:kvLookup("max",t,n,100,"float"),maxTxt:kvLookup("maxTxt",t,n,!1),reverse:kvLookup("reverse",t,n,!1),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",t,n,0),textRenderer:kvLookup("textRenderer",t,n,null),onAnimationEnd:kvLookup("onAnimationEnd",t,n,null),gaugeWidthScale:kvLookup("gaugeWidthScale",t,n,1),gaugeColor:kvLookup("gaugeColor",t,n,"#edebeb"),label:kvLookup("label",t,n,""),labelFontColor:kvLookup("labelFontColor",t,n,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",t,n,.2),shadowSize:kvLookup("shadowSize",t,n,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",t,n,3),levelColors:kvLookup("levelColors",t,n,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",t,n,700),startAnimationType:kvLookup("startAnimationType",t,n,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",t,n,700),refreshAnimationType:kvLookup("refreshAnimationType",t,n,">"),donutStartAngle:kvLookup("donutStartAngle",t,n,90),valueMinFontSize:kvLookup("valueMinFontSize",t,n,16),labelMinFontSize:kvLookup("labelMinFontSize",t,n,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",t,n,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",t,n,10),hideValue:kvLookup("hideValue",t,n,!1),hideMinMax:kvLookup("hideMinMax",t,n,!1),showInnerShadow:kvLookup("showInnerShadow",t,n,!1),humanFriendly:kvLookup("humanFriendly",t,n,!1),noGradient:kvLookup("noGradient",t,n,!1),donut:kvLookup("donut",t,n,!1),relativeGaugeSize:kvLookup("relativeGaugeSize",t,n,!1),counter:kvLookup("counter",t,n,!1),decimals:kvLookup("decimals",t,n,0),customSectors:kvLookup("customSectors",t,n,[]),formatNumber:kvLookup("formatNumber",t,n,!1),pointer:kvLookup("pointer",t,n,!1),pointerOptions:kvLookup("pointerOptions",t,n,[])};var a,r,l,s,c,u,m,f,g,d,h,p,v,x,b,k,y,M,S;i.config.value>i.config.max&&(i.config.value=i.config.max),i.config.value<i.config.min&&(i.config.value=i.config.min),i.originalValue=kvLookup("value",t,n,-1,"float"),null!==i.config.id&&null!==document.getElementById(i.config.id)?i.canvas=Raphael(i.config.id,"100%","100%"):null!==i.config.parentNode&&(i.canvas=Raphael(i.config.parentNode,"100%","100%")),!0===i.config.relativeGaugeSize?!0===i.config.donut?(i.canvas.setViewBox(0,0,200,200,!0),a=200,r=200):(i.canvas.setViewBox(0,0,200,100,!0),a=200,r=100):null!==i.config.width&&null!==i.config.height?(a=i.config.width,r=i.config.height):null!==i.config.parentNode?(i.canvas.setViewBox(0,0,200,100,!0),a=200,r=100):(a=1*getStyle(document.getElementById(i.config.id),"width").slice(0,-2),r=1*getStyle(document.getElementById(i.config.id),"height").slice(0,-2)),!0===i.config.donut?(a>r?l=s=r:s=l=a,u=(a-l)/2,m=(r-s)/2,f=s/6.4>16?s/5.4:18,g=u+l/2,p=u+l/2,v=(d=""!==i.config.label?m+s/1.85:m+s/1.7)+(h=s/16>10?s/16:10),x=s/16>10?s/16:10,b=u+l/10+l/6.666666666666667*i.config.gaugeWidthScale/2,k=v,y=s/16>10?s/16:10,M=u+l-l/10-l/6.666666666666667*i.config.gaugeWidthScale/2,S=v):(a>r?(l=2*(s=r))>a&&(l/=c=l/a,s/=c):s=a<r?(l=a)/2:.5*(l=a),u=(a-l)/2,m=(r-s)/2,f=s/6.5>i.config.valueMinFontSize?s/6.5:i.config.valueMinFontSize,g=u+l/2,d=m+s/1.275,h=s/16>i.config.labelMinFontSize?s/16:i.config.labelMinFontSize,p=u+l/2,v=d+f/2+5,x=s/16>i.config.minLabelMinFontSize?s/16:i.config.minLabelMinFontSize,b=u+l/10+l/6.666666666666667*i.config.gaugeWidthScale/2,k=v,y=s/16>i.config.maxLabelMinFontSize?s/16:i.config.maxLabelMinFontSize,M=u+l-l/10-l/6.666666666666667*i.config.gaugeWidthScale/2,S=v),i.params={canvasW:a,canvasH:r,widgetW:l,widgetH:s,dx:u,dy:m,valueFontSize:f,valueX:g,valueY:d,labelFontSize:h,labelX:p,labelY:v,minFontSize:x,minX:b,minY:k,maxFontSize:y,maxX:M,maxY:S},S=null,i.canvas.customAttributes.pki=function(t,i,e,n,o,a,r,l,s,c){var u,m,f,g,d,h,p,v,x,b;return s?(u=(1-2*(t-i)/(e-i))*Math.PI,m=n/2-n/30,f=m-n/6.666666666666667*l,g=n/2+a,d=o/2+r,h=g+m*Math.cos(u),p=d-m*Math.sin(u),v=g+f*Math.cos(u),x=d-f*Math.sin(u),b="M"+(g-f)+","+d+" ",b+="L"+(g-m)+","+d+" ",t>(e-i)/2&&(b+="A"+m+","+m+" 0 0 1 "+(g+m)+","+d+" "),b+="A"+m+","+m+" 0 0 1 "+h+","+p+" ",b+="L"+v+","+x+" ",t>(e-i)/2&&(b+="A"+f+","+f+" 0 0 0 "+(g+f)+","+d+" "),b+="A"+f+","+f+" 0 0 0 "+(g-f)+","+d+" ",b+="Z ",{path:b}):(u=(1-(t-i)/(e-i))*Math.PI,m=n/2-n/10,f=m-n/6.666666666666667*l,g=n/2+a,d=o/1.25+r,h=g+m*Math.cos(u),p=d-m*Math.sin(u),v=g+f*Math.cos(u),x=d-f*Math.sin(u),b="M"+(g-f)+","+d+" ",b+="L"+(g-m)+","+d+" ",b+="A"+m+","+m+" 0 0 1 "+h+","+p+" ",b+="L"+v+","+x+" ",b+="A"+f+","+f+" 0 0 0 "+(g-f)+","+d+" ",b+="Z ",{path:b})},i.canvas.customAttributes.ndl=function(t,e,n,o,a,r,l,s,c){var u=3.5*o/100,m=o/15,f=o/100;null!=i.config.pointerOptions.toplength&&void 0!=i.config.pointerOptions.toplength&&(u=i.config.pointerOptions.toplength),null!=i.config.pointerOptions.bottomlength&&void 0!=i.config.pointerOptions.bottomlength&&(m=i.config.pointerOptions.bottomlength),null!=i.config.pointerOptions.bottomwidth&&void 0!=i.config.pointerOptions.bottomwidth&&(f=i.config.pointerOptions.bottomwidth);var g,d,h,p,v,x,b,k,y,M,S,F,w,L,A,N,z;return c?(g=(1-2*(t-e)/(n-e))*Math.PI,d=o/2-o/30,h=d-o/6.666666666666667*s,o/2+r,p=a/2+l,v=o/2+r+d*Math.cos(g),x=a-(a-p)-d*Math.sin(g),b=o/2+r+h*Math.cos(g),k=a-(a-p)-h*Math.sin(g),y=v+u*Math.cos(g),M=x-u*Math.sin(g),S=b-m*Math.cos(g),F=k+m*Math.sin(g),w=S+f*Math.sin(g),L=F+f*Math.cos(g),A=S-f*Math.sin(g),N=F-f*Math.cos(g),z="M"+w+","+L+" ",z+="L"+A+","+N+" ",z+="L"+y+","+M+" ",z+="Z ",{path:z}):(g=(1-(t-e)/(n-e))*Math.PI,d=o/2-o/10,h=d-o/6.666666666666667*s,o/2+r,p=a/1.25+l,v=o/2+r+d*Math.cos(g),x=a-(a-p)-d*Math.sin(g),b=o/2+r+h*Math.cos(g),k=a-(a-p)-h*Math.sin(g),y=v+u*Math.cos(g),M=x-u*Math.sin(g),S=b-m*Math.cos(g),F=k+m*Math.sin(g),w=S+f*Math.sin(g),L=F+f*Math.cos(g),A=S-f*Math.sin(g),N=F-f*Math.cos(g),z="M"+w+","+L+" ",z+="L"+A+","+N+" ",z+="L"+y+","+M+" ",z+="Z ",{path:z})},i.gauge=i.canvas.path().attr({stroke:"none",fill:i.config.gaugeColor,pki:[i.config.max,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse]}),i.level=i.canvas.path().attr({stroke:"none",fill:getColor(i.config.value,(i.config.value-i.config.min)/(i.config.max-i.config.min),i.config.levelColors,i.config.noGradient,i.config.customSectors),pki:[i.config.min,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse]}),i.config.donut&&i.level.transform("r"+i.config.donutStartAngle+", "+(i.params.widgetW/2+i.params.dx)+", "+(i.params.widgetH/2+i.params.dy)),i.config.pointer&&(i.needle=i.canvas.path().attr({stroke:null!==i.config.pointerOptions.stroke&&void 0!==i.config.pointerOptions.stroke?i.config.pointerOptions.stroke:"none","stroke-width":null!==i.config.pointerOptions.stroke_width&&void 0!==i.config.pointerOptions.stroke_width?i.config.pointerOptions.stroke_width:0,"stroke-linecap":null!==i.config.pointerOptions.stroke_linecap&&void 0!==i.config.pointerOptions.stroke_linecap?i.config.pointerOptions.stroke_linecap:"square",fill:null!==i.config.pointerOptions.color&&void 0!==i.config.pointerOptions.color?i.config.pointerOptions.color:"#000000",ndl:[i.config.min,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut]}),i.config.donut&&i.needle.transform("r"+i.config.donutStartAngle+", "+(i.params.widgetW/2+i.params.dx)+", "+(i.params.widgetH/2+i.params.dy))),i.txtValue=i.canvas.text(i.params.valueX,i.params.valueY,0),i.txtValue.attr({"font-size":i.params.valueFontSize,"font-weight":"bold","font-family":i.config.valueFontFamily,fill:i.config.valueFontColor,"fill-opacity":"0"}),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY),i.txtLabel=i.canvas.text(i.params.labelX,i.params.labelY,i.config.label),i.txtLabel.attr({"font-size":i.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:i.config.labelFontColor,"fill-opacity":"0"}),setDy(i.txtLabel,i.params.labelFontSize,i.params.labelY);var F=i.config.min;i.config.reverse&&(F=i.config.max),i.txtMinimum=F,i.config.minTxt?i.txtMinimum=i.config.minTxt:i.config.humanFriendly?i.txtMinimum=humanFriendlyNumber(F,i.config.humanFriendlyDecimal):i.config.formatNumber&&(i.txtMinimum=formatNumber(F)),i.txtMin=i.canvas.text(i.params.minX,i.params.minY,i.txtMinimum),i.txtMin.attr({"font-size":i.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:i.config.labelFontColor,"fill-opacity":i.config.hideMinMax||i.config.donut?"0":"1"}),setDy(i.txtMin,i.params.minFontSize,i.params.minY);var w=i.config.max;i.config.reverse&&(w=i.config.min),i.txtMaximum=w,i.config.maxTxt?i.txtMaximum=i.config.maxTxt:i.config.humanFriendly?i.txtMaximum=humanFriendlyNumber(w,i.config.humanFriendlyDecimal):i.config.formatNumber&&(i.txtMaximum=formatNumber(w)),i.txtMax=i.canvas.text(i.params.maxX,i.params.maxY,i.txtMaximum),i.txtMax.attr({"font-size":i.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:i.config.labelFontColor,"fill-opacity":i.config.hideMinMax||i.config.donut?"0":"1"}),setDy(i.txtMax,i.params.maxFontSize,i.params.maxY);var L=i.canvas.canvas.childNodes[1],A="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){i.generateShadow(A,L)}):i.generateShadow(A,L)),A=null,i.config.textRenderer?i.originalValue=i.config.textRenderer(i.originalValue):i.config.humanFriendly?i.originalValue=humanFriendlyNumber(i.originalValue,i.config.humanFriendlyDecimal)+i.config.symbol:i.config.formatNumber?i.originalValue=formatNumber(i.originalValue)+i.config.symbol:i.originalValue=(1*i.originalValue).toFixed(i.config.decimals)+i.config.symbol,!0===i.config.counter?(eve.on("raphael.anim.frame."+i.level.id,function(){var t=i.level.attr("pki")[0];i.config.reverse&&(t=1*i.config.max+1*i.config.min-1*i.level.attr("pki")[0]),i.config.textRenderer?i.txtValue.attr("text",i.config.textRenderer(Math.floor(t))):i.config.humanFriendly?i.txtValue.attr("text",humanFriendlyNumber(Math.floor(t),i.config.humanFriendlyDecimal)+i.config.symbol):i.config.formatNumber?i.txtValue.attr("text",formatNumber(Math.floor(t))+i.config.symbol):i.txtValue.attr("text",(1*t).toFixed(i.config.decimals)+i.config.symbol),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY),t=null}),eve.on("raphael.anim.finish."+i.level.id,function(){i.txtValue.attr({text:i.originalValue}),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY)})):eve.on("raphael.anim.start."+i.level.id,function(){i.txtValue.attr({text:i.originalValue}),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY)});var N=i.config.value;i.config.reverse&&(N=1*i.config.max+1*i.config.min-1*i.config.value),i.level.animate({pki:[N,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse]},i.config.startAnimationTime,i.config.startAnimationType,i.config.onAnimationEnd),i.config.pointer&&i.needle.animate({ndl:[N,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut]},i.config.startAnimationTime,i.config.startAnimationType),i.txtValue.animate({"fill-opacity":i.config.hideValue?"0":"1"},i.config.startAnimationTime,i.config.startAnimationType),i.txtLabel.animate({"fill-opacity":"1"},i.config.startAnimationTime,i.config.startAnimationType)},JustGage.prototype.refresh=function(t,i){var e,n;null!==(i=i||null)&&(this.config.max=i,this.txtMaximum=this.config.max,this.config.maxTxt?this.txtMaximum=this.config.maxTxt:this.config.humanFriendly?this.txtMaximum=humanFriendlyNumber(this.config.max,this.config.humanFriendlyDecimal):this.config.formatNumber&&(this.txtMaximum=formatNumber(this.config.max)),this.config.reverse?(this.txtMin.attr({text:this.txtMaximum}),this.txtMax.attr({text:this.txtMinimum}),setDy(this.txtMin,this.params.minFontSize,this.params.minY),setDy(this.txtMax,this.params.minFontSize,this.params.minY)):(this.txtMax.attr({text:this.txtMaximum}),setDy(this.txtMax,this.params.maxFontSize,this.params.maxY))),e=t,1*t>1*this.config.max&&(t=1*this.config.max),1*t<1*this.config.min&&(t=1*this.config.min),n=getColor(t,(t-this.config.min)/(this.config.max-this.config.min),this.config.levelColors,this.config.noGradient,this.config.customSectors),e=this.config.textRenderer?this.config.textRenderer(e):this.config.humanFriendly?humanFriendlyNumber(e,this.config.humanFriendlyDecimal)+this.config.symbol:this.config.formatNumber?formatNumber((1*e).toFixed(this.config.decimals))+this.config.symbol:(1*e).toFixed(this.config.decimals)+this.config.symbol,this.originalValue=e,this.config.value=1*t,this.config.counter||(this.txtValue.attr({text:e}),setDy(this.txtValue,this.params.valueFontSize,this.params.valueY));var o=this.config.value;this.config.reverse&&(o=1*this.config.max+1*this.config.min-1*this.config.value),this.level.animate({pki:[o,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale,this.config.donut,this.config.reverse],fill:n},this.config.refreshAnimationTime,this.config.refreshAnimationType,this.config.onAnimationEnd),this.config.pointer&&this.needle.animate({ndl:[o,this.config.min,this.config.max,this.params.widgetW,this.params.widgetH,this.params.dx,this.params.dy,this.config.gaugeWidthScale,this.config.donut]},this.config.refreshAnimationTime,this.config.refreshAnimationType),i=null},JustGage.prototype.destroy=function(){document.getElementById(this.config.id).innerHTML=""},JustGage.prototype.generateShadow=function(t,i){var e,n,o,a,r,l,s,c="inner-shadow-"+this.config.id;(e=document.createElementNS(t,"filter")).setAttribute("id",c),i.appendChild(e),(n=document.createElementNS(t,"feOffset")).setAttribute("dx",0),n.setAttribute("dy",this.config.shadowVerticalOffset),e.appendChild(n),(o=document.createElementNS(t,"feGaussianBlur")).setAttribute("result","offset-blur"),o.setAttribute("stdDeviation",this.config.shadowSize),e.appendChild(o),(a=document.createElementNS(t,"feComposite")).setAttribute("operator","out"),a.setAttribute("in","SourceGraphic"),a.setAttribute("in2","offset-blur"),a.setAttribute("result","inverse"),e.appendChild(a),(r=document.createElementNS(t,"feFlood")).setAttribute("flood-color","black"),r.setAttribute("flood-opacity",this.config.shadowOpacity),r.setAttribute("result","color"),e.appendChild(r),(l=document.createElementNS(t,"feComposite")).setAttribute("operator","in"),l.setAttribute("in","color"),l.setAttribute("in2","inverse"),l.setAttribute("result","shadow"),e.appendChild(l),(s=document.createElementNS(t,"feComposite")).setAttribute("operator","over"),s.setAttribute("in","shadow"),s.setAttribute("in2","SourceGraphic"),e.appendChild(s),this.config.showInnerShadow&&(this.canvas.canvas.childNodes[2].setAttribute("filter","url("+window.location.pathname+"#"+c+")"),this.canvas.canvas.childNodes[3].setAttribute("filter","url("+window.location.pathname+"#"+c+")")),s=null};var ie=function(){for(var t=3,i=document.createElement("div"),e=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",e[0];);return t>4?t:void 0}();